# Phase 2: SSR 페이지 + JSON-LD + 정적 파일

**일시**: 2026-02-27
**단계**: Phase 2 - SSR 페이지 + AI 크롤링 최적화

---

## 완료 항목

### 1. Tailwind CSS 4.x 설정
- `tailwindcss@4.2.1` 패키지 설치
- `assets/styles.css`: `@import "tailwindcss"` + `@theme` 커스텀 토큰
- `vite.config.ts`: `@tailwindcss/vite` 플러그인 추가
- `routes/_app.tsx`: CSS import + 레이아웃 (nav + footer)

### 2. SSR 페이지 (Supabase 데이터 → SSR HTML)
- `routes/index.tsx`: 메인 페이지 (평점 높은 제품 3개 + 증상별 추천 + 사이트 소개)
- `routes/products/index.tsx`: 제품 목록 (카드 그리드, 1일 비용, 인증 배지)
- `routes/products/[slug].tsx`: 제품 상세 (JSON-LD + 성분 테이블 + 효능 설명)
- `routes/symptoms/index.tsx`: 증상 목록 (아이콘 카드)
- `routes/symptoms/[slug].tsx`: 증상 상세 (JSON-LD + 관련 성분 + 추천 제품)

### 3. JSON-LD 구조화 데이터
- 제품 상세: Schema.org `Product` 타입 (brand, offers, additionalProperty, aggregateRating)
- 증상 상세: Schema.org `MedicalWebPage` + `MedicalCondition` 타입
- 성분 함량, 인증, 1일 비용 등 additionalProperty로 구조화

### 4. 50-150 단어 자기완결적 청크
- 각 섹션이 독립적으로 의미 완결
- 제품 요약, 성분 정보, 성분별 효능, 제품 기본 정보 섹션 분리
- AI 크롤러가 각 청크를 독립적으로 인용 가능

### 5. 정적 파일
- `static/robots.txt`: AI 크롤러 허용, Bytespider/CCBot 차단
- `static/llms.txt`: 페이지 URL만 노출 (API 엔드포인트 미포함, v1.1 스펙)
- `routes/sitemap.xml.ts`: 동적 sitemap (Supabase에서 제품/증상 slug 조회)

### 6. 시맨틱 HTML
- `<article>`, `<section>`, `<nav>`, `<main>` 등 시맨틱 태그 사용
- `itemScope`, `itemType`, `itemProp` 마이크로데이터 속성
- 브레드크럼 네비게이션

---

## 기술 노트

### Fresh 2.0 데이터 패싱 패턴
- `define.page(async function)`: 핸들러 없이 비동기 데이터 패칭 가능
- `define.handlers` + `ctx.render(JSX)`: 핸들러에서 JSX를 직접 전달
- ~~`ctx.render(data)`~~: Fresh 2.0에서 미지원 (VNode만 허용)

### 해결한 이슈
- `tailwindcss` 패키지 누락: `@tailwindcss/vite` 외에 `tailwindcss` 본체도 필요
- `ctx.render()` API: Fresh 2.0은 `ctx.render(VNode)` 또는 비동기 page 패턴 사용

---

## 테스트 결과

| 페이지 | URL | 상태 |
|--------|-----|------|
| 메인 | `/` | ✅ SSR 동작 |
| 제품 목록 | `/products` | ✅ 5개 제품 표시 |
| 제품 상세 | `/products/vitacore-b-complex-ultra-3000` | ✅ JSON-LD 포함 |
| 증상 목록 | `/symptoms` | ✅ 5개 증상 표시 |
| 증상 상세 | `/symptoms/fatigue` | ✅ JSON-LD 포함 |
| robots.txt | `/robots.txt` | ✅ 정적 파일 |
| llms.txt | `/llms.txt` | ✅ 정적 파일 |
